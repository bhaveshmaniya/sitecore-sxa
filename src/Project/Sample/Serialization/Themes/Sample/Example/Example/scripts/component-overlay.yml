---
ID: "b4f86aad-1d67-461c-9b1d-5b9fff6da092"
Parent: "c5a1d44e-ed67-425b-9024-241961d0ca59"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Themes/Sample/Example/Example/scripts/component-overlay"
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/430777640C4240E390D3FD00B7F1F2A2.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "85005664-e17d-4b3b-bfcc-f23bf1ac5af7"
  Value: 77u/LyogZ2xvYmFsIFhBQ29udGV4dDpmYWxzZSwgbWVqczpmYWxzZSAqLw0KWEEuY29tcG9uZW50Lm92ZXJsYXkgPSBmdW5jdGlvbigkKSB7DQoNCiAgICB2YXIgYXBpID0ge30sDQogICAgICAgIGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZiwNCiAgICAgICAgaG9zdCA9IGxvY2F0aW9uLmhvc3QsDQogICAgICAgIGxhYmVsLA0KICAgICAgICBvdmVybGF5UGxhY2Vob2xkZXIgPSBmYWxzZSwNCiAgICAgICAgbWFyZ2luVG9wID0gMTAwOw0KDQogICAgZnVuY3Rpb24gaXNQcmV2aWV3TW9kZSgpIHsNCiAgICAgICAgaWYgKGhyZWYuaW5kZXhPZigic2NfbW9kZT1wcmV2aWV3IikgPiAtMSkgew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgdmFyICRoZFBhZ2VNb2RlID0gJCgnI2hkUGFnZU1vZGUnKTsNCg0KICAgICAgICByZXR1cm4gJGhkUGFnZU1vZGUubGVuZ3RoID4gMCAmJiAkaGRQYWdlTW9kZS5hdHRyKCd2YWx1ZScpID09ICdwcmV2aWV3JzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpc0VkaXRNb2RlKCkgew0KICAgICAgICBpZiAoaHJlZi5pbmRleE9mKCJzY19tb2RlPWVkaXQiKSA+IC0xKSB7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgdmFyICRoZFBhZ2VNb2RlID0gJCgnI2hkUGFnZU1vZGUnKTsNCg0KICAgICAgICByZXR1cm4gJGhkUGFnZU1vZGUubGVuZ3RoID4gMCAmJiAkaGRQYWdlTW9kZS5hdHRyKCd2YWx1ZScpID09ICdlZGl0JzsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpc092ZXJsYXlQYWdlKCkgew0KICAgICAgICByZXR1cm4gJCgnI3dyYXBwZXInKS5oYXNDbGFzcygnb3ZlcmxheS1wYWdlJyk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gaGFzT3ZlcmxheUNvbnRlbnQoKSB7DQogICAgICAgIHJldHVybiAkKCIub3ZlcmxheS1zb3VyY2UiKS5sZW5ndGg7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gcmVzaXplT3ZlcmxheShpbm5lciwgY29udGVudCwgb3B0aW9ucykgew0KICAgICAgICB2YXIgdW5pdCA9ICJweCI7DQogICAgICAgIHZhciBjc3MgPSB7DQogICAgICAgICAgICAid2lkdGgiOiAiIiwNCiAgICAgICAgICAgICJoZWlnaHQiOiAiIg0KICAgICAgICB9Ow0KICAgICAgICB2YXIgd2ggPSAkKHdpbmRvdykuaGVpZ2h0KCk7DQoNCiAgICAgICAgaWYgKG9wdGlvbnMucGVyY2VudCkgew0KICAgICAgICAgICAgdW5pdCA9ICIlIjsNCiAgICAgICAgICAgIGlubmVyLmFkZENsYXNzKCJvdmVybGF5LXBlcmNlbnQiKTsNCiAgICAgICAgICAgIGlmIChpc0VkaXRNb2RlKCkpIHsNCiAgICAgICAgICAgICAgICBpbm5lci5hZGRDbGFzcygiZWRpdCIpDQogICAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpbm5lci5yZW1vdmVDbGFzcygib3ZlcmxheS1wZXJjZW50Iik7DQogICAgICAgICAgICBpZiAoaXNFZGl0TW9kZSgpKSB7DQogICAgICAgICAgICAgICAgaW5uZXIucmVtb3ZlQ2xhc3MoImVkaXQiKQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKG9wdGlvbnMud2lkdGgpIHsNCiAgICAgICAgICAgIGNzc1sid2lkdGgiXSA9IG9wdGlvbnMud2lkdGggKyB1bml0Ow0KICAgICAgICB9DQogICAgICAgIGlmIChvcHRpb25zLmhlaWdodCkgew0KICAgICAgICAgICAgY3NzWyJoZWlnaHQiXSA9IG9wdGlvbnMuaGVpZ2h0ICsgdW5pdDsNCiAgICAgICAgfQ0KDQogICAgICAgIGNzc1sibWF4LWhlaWdodCJdID0gKHdoIC0gbWFyZ2luVG9wIC0gMC4xICogd2gpICsgInB4IjsNCg0KICAgICAgICBjb250ZW50LmNzcyhjc3MpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldFVybFZhcmlhYmxlcyh1cmwpIHsNCiAgICAgICAgdmFyIHEgPSB1cmwuc3BsaXQoJz8nKVsxXSwNCiAgICAgICAgICAgIHZhcnMgPSBbXSwNCiAgICAgICAgICAgIGhhc2g7DQoNCiAgICAgICAgaWYgKHEgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICBxID0gcS5zcGxpdCgnJicpOw0KICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgaGFzaCA9IHFbaV0uc3BsaXQoJz0nKTsNCiAgICAgICAgICAgICAgICB2YXJzLnB1c2goaGFzaFsxXSk7DQogICAgICAgICAgICAgICAgdmFyc1toYXNoWzBdXSA9IGhhc2hbMV07DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gdmFyczsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRTaXplKHZhcnMpIHsNCiAgICAgICAgdmFyIG9iaiA9IHt9Ow0KDQogICAgICAgIGlmICh2YXJzWyJ3aWR0aCJdICE9PSBudWxsKSB7DQogICAgICAgICAgICBvYmpbIndpZHRoIl0gPSB2YXJzWyJ3aWR0aCJdOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKHZhcnNbImhlaWdodCJdICE9PSBudWxsKSB7DQogICAgICAgICAgICBvYmpbImhlaWdodCJdID0gdmFyc1siaGVpZ2h0Il07DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gb2JqOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGNoZWNrSW50ZXJuYWwodXJsKSB7DQogICAgICAgIGlmICh1cmwuaW5kZXhPZihob3N0KSA+IC0xKSB7DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY2hlY2tJbWFnZSh1cmwpIHsNCiAgICAgICAgdmFyIGV4dCA9IHVybC5zcGxpdCgiPyIpWzBdLnNwbGl0KCcuJykucG9wKCk7DQogICAgICAgIGlmICgkLmluQXJyYXkoZXh0LCBbJ2dpZicsICdwbmcnLCAnanBnJywgJ2pwZWcnXSkgPiAtMSkgew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfQ0KDQoNCiAgICBmdW5jdGlvbiBsb2FkT3ZlcmxheSh1cmwsIG92ZXJsYXkpIHsNCiAgICAgICAgdmFyIGNvbnRlbnQgPSBvdmVybGF5LmZpbmQoIi5vdmVybGF5LWlubmVyIiksDQogICAgICAgICAgICBvdmVybGF5Q29udGVudCA9IG92ZXJsYXkuZmluZCgiLmNvbXBvbmVudC1jb250ZW50IiksDQogICAgICAgICAgICB2YXJzID0gZ2V0VXJsVmFyaWFibGVzKHVybCksDQogICAgICAgICAgICBpbnRlcm5hbExpbmsgPSBjaGVja0ludGVybmFsKHVybCksDQogICAgICAgICAgICBvdmVybGF5U2l6ZSA9IGdldFNpemUodmFycyksDQogICAgICAgICAgICBzdWZmaXg7DQoNCiAgICAgICAgY29udGVudC5yZW1vdmVBdHRyKCdzdHlsZScpOw0KDQogICAgICAgIGlmIChpbnRlcm5hbExpbmspIHsNCiAgICAgICAgICAgIGlmIChjaGVja0ltYWdlKHVybCkpIHsNCiAgICAgICAgICAgICAgICBjb250ZW50LmVtcHR5KCkuYXBwZW5kKCQoIjxpbWc+IiwgeyBzcmM6IHVybCB9KSk7DQogICAgICAgICAgICAgICAgY29udGVudC5jc3Mob3ZlcmxheVNpemUpOw0KICAgICAgICAgICAgICAgIHNob3dPdmVybGF5KG92ZXJsYXkpOw0KICAgICAgICAgICAgfSBlbHNlIGlmICh1cmwuaW5kZXhPZigib3ZlcmxheXR5cGU9aWZyYW1lIikgPiAtMSkgew0KICAgICAgICAgICAgICAgIGNvbnRlbnQuZW1wdHkoKS5hcHBlbmQoJCgiPGlmcmFtZT4iLCB7IHNyYzogdXJsLCBzdHlsZTogIndpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCUiIH0pKTsNCiAgICAgICAgICAgICAgICBjb250ZW50LmNzcyhvdmVybGF5U2l6ZSk7DQogICAgICAgICAgICAgICAgc2hvd092ZXJsYXkob3ZlcmxheSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGlmIChpc1ByZXZpZXdNb2RlKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgc3VmZml4ID0gImNmX292ZXJsYXk9MSI7DQogICAgICAgICAgICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKCJzaXRlY29yZS9zaGVsbC8iKTsNCiAgICAgICAgICAgICAgICAgICAgdXJsICs9ICh1cmwuaW5kZXhPZigiPyIpID09IC0xID8gIj8iIDogIiYiKSArIHN1ZmZpeDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAkLmdldCh1cmwsIGZ1bmN0aW9uKGRhdGEpIHsNCiAgICAgICAgICAgICAgICAgICAgdmFyIG92ZXJsYXlEYXRhID0gJChkYXRhKS5iZWZvcmUoKS5maXJzdCgpOw0KDQogICAgICAgICAgICAgICAgICAgIHJlc2l6ZU92ZXJsYXkoY29udGVudCwgb3ZlcmxheUNvbnRlbnQsIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBvdmVybGF5RGF0YS5hdHRyKCJkYXRhLXdpZHRoIiksDQogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IG92ZXJsYXlEYXRhLmRhdGEoImhlaWdodCIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgcGVyY2VudDogb3ZlcmxheURhdGEuZGF0YSgicGVyY2VudCIpDQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuZW1wdHkoKS5hcHBlbmQoZGF0YSk7DQogICAgICAgICAgICAgICAgICAgIFhBLmluaXQoKTsNCiAgICAgICAgICAgICAgICAgICAgc2hvd092ZXJsYXkob3ZlcmxheSk7DQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAoY2hlY2tJbWFnZSh1cmwpKSB7DQogICAgICAgICAgICAgICAgY29udGVudC5lbXB0eSgpLmFwcGVuZCgkKCI8aW1nPiIsIHsgc3JjOiB1cmwgfSkpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBjb250ZW50LmVtcHR5KCkuYXBwZW5kKCQoIjxpZnJhbWUgPiIsIHsgc3JjOiB1cmwsIHN0eWxlOiAid2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJSIgfSkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29udGVudC5jc3Mob3ZlcmxheVNpemUpOw0KICAgICAgICAgICAgc2hvd092ZXJsYXkob3ZlcmxheSk7DQogICAgICAgIH0NCg0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHByZVNob3dPdmVybGF5KG92ZXJsYXkpIHsNCiAgICAgICAgb3ZlcmxheS5jc3Moew0KICAgICAgICAgICAgIm9wYWNpdHkiOiAxDQogICAgICAgIH0pLnNob3coKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzaG93T3ZlcmxheShvdmVybGF5KSB7DQogICAgICAgIHZhciBpLCBxLCBsaW5rcywgY2xvc2UsIGNvbnRlbnQ7DQogICAgICAgIG92ZXJsYXkuc2hvdygpLmFuaW1hdGUoew0KICAgICAgICAgICAgb3BhY2l0eTogMQ0KICAgICAgICB9KTsNCg0KICAgICAgICBjbG9zZSA9IG92ZXJsYXkuZmluZCgiLm92ZXJsYXktY2xvc2UtbGluayIpOw0KICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBjbG9zZS5mb2N1cygpOyB9LCAwKTsNCiAgICAgICAgbGlua3MgPSBvdmVybGF5LmZpbmQoImE6bm90KC5vdmVybGF5LWNsb3NlLWxpbmspIik7DQogICAgICAgIGkgPSAyOw0KICAgICAgICBmb3IgKHEgPSAwOyBxIDwgbGlua3MubGVuZ3RoOyBxKyspIHsNCiAgICAgICAgICAgICQobGlua3NbcV0pLmF0dHIoInRhYkluZGV4IiwgaSsrKTsNCiAgICAgICAgfQ0KICAgICAgICBjb250ZW50ID0gb3ZlcmxheS5maW5kKCIub3ZlcmxheS1pbm5lciIpOw0KICAgICAgICBjb250ZW50LmF0dHIoInRhYkluZGV4IiwgaSk7DQogICAgICAgIGNvbnRlbnQuYmx1cihmdW5jdGlvbihhcmdzKSB7DQogICAgICAgICAgICBhcmdzLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICBhcmdzLnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2xvc2UuZm9jdXMoKSB9LCAwKTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgWEFDb250ZXh0LlRyYWNraW5nLnRyYWNrKA0KICAgICAgICAgICAgWEFDb250ZXh0LkRvbWFpbi5UcmFja2luZ1R5cGVzKCkuZXZlbnQsIHsNCiAgICAgICAgICAgICAgICBjYXRlZ29yeTogIk92ZXJsYXkiLA0KICAgICAgICAgICAgICAgIGV2ZW50OiAib3BlbiIsDQogICAgICAgICAgICAgICAgbGFiZWw6IGxhYmVsLA0KICAgICAgICAgICAgICAgIGRhdGE6IDANCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICAic3luYyINCiAgICAgICAgKTsNCiAgICAgICAgcmV0dXJuIG92ZXJsYXk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gaGlkZU92ZXJsYXkob3ZlcmxheSkgew0KICAgICAgICB2YXIgY29udGVudCA9IG92ZXJsYXkuZmluZCgiLm92ZXJsYXktaW5uZXIiKTsNCg0KICAgICAgICBvdmVybGF5LmFuaW1hdGUoeyBvcGFjaXR5OiAwIH0sDQogICAgICAgICAgICBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICBvdmVybGF5LmhpZGUoKTsNCiAgICAgICAgICAgICAgICBjb250ZW50LmVtcHR5KCk7DQoNCiAgICAgICAgICAgICAgICBpZiAobWVqcykgew0KICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwIGluIG1lanMucGxheWVycykgew0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCQoIiMiICsgbWVqcy5wbGF5ZXJzW3BdLmlkKS5wYXJlbnRzKCIub3ZlcmxheSIpLmxlbmd0aCA9PSAxKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgiIyIgKyBtZWpzLnBsYXllcnNbcF0uaWQgKyAnIHZpZGVvJykuYXR0cignc3JjJywgJycpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lanMucGxheWVyc1twXS5yZW1vdmUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWpzLnBsYXllcnMuc3BsaWNlKHAsIDEpOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICApOw0KDQogICAgICAgIFhBQ29udGV4dC5UcmFja2luZy50cmFjaygNCiAgICAgICAgICAgIFhBQ29udGV4dC5Eb21haW4uVHJhY2tpbmdUeXBlcygpLmV2ZW50LCB7DQogICAgICAgICAgICAgICAgY2F0ZWdvcnk6ICJPdmVybGF5IiwNCiAgICAgICAgICAgICAgICBldmVudDogImNsb3NlIiwNCiAgICAgICAgICAgICAgICBsYWJlbDogbGFiZWwsDQogICAgICAgICAgICAgICAgZGF0YTogMA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICJzeW5jIg0KICAgICAgICApOw0KICAgICAgICByZXR1cm4gb3ZlcmxheTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjcmVhdGVPdmVybGF5KCkgew0KICAgICAgICB2YXIgb3ZlcmxheSA9ICI8ZGl2IGNsYXNzPSdvdmVybGF5LXdyYXBwZXInPiIgKw0KICAgICAgICAgICAgIjxkaXYgY2xhc3M9J292ZXJsYXkgY29tcG9uZW50Jz4iICsNCiAgICAgICAgICAgICI8ZGl2IGNsYXNzPSdjb21wb25lbnQtY29udGVudCc+IiArDQogICAgICAgICAgICAiPGRpdiBjbGFzcz0nb3ZlcmxheS1jbG9zZSc+PGEgdGFiSW5kZXg9JzEnIGNsYXNzPSdvdmVybGF5LWNsb3NlLWxpbmsnIGhyZWY9JyMnPsOXPC9hPjwvZGl2PiIgKw0KICAgICAgICAgICAgIjxkaXYgY2xhc3M9J292ZXJsYXktaW5uZXInIHRhYkluZGV4PScyJz48L2Rpdj4iICsNCiAgICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAgICI8L2Rpdj4iICsNCiAgICAgICAgICAgICI8L2Rpdj4iOw0KDQogICAgICAgICQoImJvZHkiKS5hcHBlbmQob3ZlcmxheSk7DQogICAgfQ0KDQogICAgYXBpLmluaXQgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgdmFyIG92ZXJsYXlDb250ZW50LA0KICAgICAgICAgICAgb3ZlcmxheVNvdXJjZSwNCiAgICAgICAgICAgIG92ZXJsYXlJbm5lciwNCiAgICAgICAgICAgIG92ZXJsYXlDbG9zZUxpbmssDQogICAgICAgICAgICBjbG9zZUFjdGlvbiwNCiAgICAgICAgICAgIG92ZXJsYXlDbGlja1NvdXJjZTsNCiAgICAgICAgaWYgKCFvdmVybGF5UGxhY2Vob2xkZXIgJiYgaGFzT3ZlcmxheUNvbnRlbnQoKSkgew0KICAgICAgICAgICAgY3JlYXRlT3ZlcmxheSgpOw0KICAgICAgICB9DQoNCiAgICAgICAgaWYgKGlzT3ZlcmxheVBhZ2UoKSkgew0KICAgICAgICAgICAgdmFyIHBhZ2UgPSAkKCIub3ZlcmxheS1wYWdlIiksDQogICAgICAgICAgICAgICAgb3ZlcmxheSA9ICQoIiNzcG5PdmVybGF5IiksDQogICAgICAgICAgICAgICAgY29udGVudCA9IG92ZXJsYXlDb250ZW50LmNoaWxkcmVuKCIub3ZlcmxheS1pbm5lciIpOw0KICAgICAgICAgICAgb3ZlcmxheUNvbnRlbnQgPSBwYWdlLmNoaWxkcmVuKCIuY29tcG9uZW50LWNvbnRlbnQiKTsNCg0KICAgICAgICAgICAgcmVzaXplT3ZlcmxheShjb250ZW50LCBvdmVybGF5Q29udGVudCwgew0KICAgICAgICAgICAgICAgIHdpZHRoOiBvdmVybGF5LmRhdGEoIndpZHRoIiksDQogICAgICAgICAgICAgICAgaGVpZ2h0OiBvdmVybGF5LmRhdGEoImhlaWdodCIpLA0KICAgICAgICAgICAgICAgIHBlcmNlbnQ6IG92ZXJsYXkuZGF0YSgicGVyY2VudCIpDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIG92ZXJsYXlDb250ZW50Lm9uKCJjbGljayIsIGZ1bmN0aW9uKGV2ZW50KSB7DQogICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHBhZ2Uub24oImNsaWNrIiwgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgaWYgKGlzUHJldmlld01vZGUoKSkgew0KICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKCJzY19tb2RlPXByZXZpZXciLCAic2NfbW9kZT1lZGl0IikNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgICBvdmVybGF5ID0gJCgiLm92ZXJsYXktd3JhcHBlciA+IC5vdmVybGF5Iik7DQogICAgICAgIG92ZXJsYXlDb250ZW50ID0gb3ZlcmxheS5maW5kKCIuY29tcG9uZW50LWNvbnRlbnQiKTsNCiAgICAgICAgb3ZlcmxheVNvdXJjZSA9ICQoIi5vdmVybGF5LXNvdXJjZSBhOm5vdCguaW5pdGlhbGl6ZWQpLCBhLm92ZXJsYXktc291cmNlOm5vdCguaW5pdGlhbGl6ZWQpIik7DQogICAgICAgIG92ZXJsYXlJbm5lciA9ICQoIi5vdmVybGF5LWlubmVyIik7DQogICAgICAgIG92ZXJsYXlDbG9zZUxpbmsgPSBvdmVybGF5LmZpbmQoIi5vdmVybGF5LWNsb3NlLWxpbmsiKTsNCiAgICAgICAgY2xvc2VBY3Rpb247DQogICAgICAgIG92ZXJsYXlDbGlja1NvdXJjZTsNCg0KICAgICAgICBjbG9zZUFjdGlvbiA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgaGlkZU92ZXJsYXkob3ZlcmxheSk7DQogICAgICAgICAgICBvdmVybGF5SW5uZXIub2ZmKCJibHVyIik7DQogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIGlmIChvdmVybGF5Q2xpY2tTb3VyY2UgIT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBvdmVybGF5Q2xpY2tTb3VyY2UuZm9jdXMoKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LCAwKTsNCiAgICAgICAgfTsNCg0KICAgICAgICBpZiAoIW92ZXJsYXlQbGFjZWhvbGRlcikgew0KICAgICAgICAgICAgb3ZlcmxheUNvbnRlbnQub24oImNsaWNrIiwgZnVuY3Rpb24oZXZlbnQpIHsNCiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBvdmVybGF5Lm9uKCJjbGljayIsIGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIGNsb3NlQWN0aW9uKCk7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgJCgiYm9keSIpLmtleXVwKGZ1bmN0aW9uKGFyZ3MpIHsNCiAgICAgICAgICAgICAgICBhcmdzLnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgICAgICAgIGlmIChhcmdzLndoaWNoID09IDI3KSB7DQogICAgICAgICAgICAgICAgICAgIGNsb3NlQWN0aW9uKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIG92ZXJsYXlDbG9zZUxpbmsub24oImNsaWNrIiwgZnVuY3Rpb24oYXJncykgew0KICAgICAgICAgICAgICAgIGFyZ3MucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgICAgICBjbG9zZUFjdGlvbigpOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICQod2luZG93KS5vbigicmVzaXplIiwgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgdmFyIGhlaWdodCA9ICQod2luZG93KS5oZWlnaHQoKTsNCiAgICAgICAgICAgICAgICBoZWlnaHQgPSBoZWlnaHQgLSBtYXJnaW5Ub3AgLSAwLjEgKiBoZWlnaHQ7DQogICAgICAgICAgICAgICAgb3ZlcmxheUNvbnRlbnQuY3NzKCJtYXgtaGVpZ2h0IiwgaGVpZ2h0ICsgInB4Iik7DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgb3ZlcmxheVBsYWNlaG9sZGVyID0gdHJ1ZTsNCiAgICAgICAgfQ0KDQoNCiAgICAgICAgb3ZlcmxheVNvdXJjZS5lYWNoKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgaWYgKGlzRWRpdE1vZGUoKSkgew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgJCh0aGlzKS5vbigiY2xpY2siLCBmdW5jdGlvbihldmVudCkgew0KICAgICAgICAgICAgICAgIG92ZXJsYXlDbGlja1NvdXJjZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7DQogICAgICAgICAgICAgICAgaWYgKCFpc0VkaXRNb2RlKCkpIHsNCiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7DQogICAgICAgICAgICAgICAgICAgIHByZVNob3dPdmVybGF5KG92ZXJsYXksIG92ZXJsYXlDb250ZW50KTsNCg0KICAgICAgICAgICAgICAgICAgICB2YXIgdXJpID0gdGhpcy5ocmVmOw0KICAgICAgICAgICAgICAgICAgICBsb2FkT3ZlcmxheSh1cmksIG92ZXJsYXkpOw0KDQogICAgICAgICAgICAgICAgICAgIHZhciBocmVmID0gdGhpcy5ocmVmLnNwbGl0KCcvJyk7DQogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGhyZWYubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsID0gaHJlZi5wb3AoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYWJlbC5sZW5ndGggPT0gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgLy8gJCh0aGlzKS5vbignZm9jdXMnLCBmdW5jdGlvbihhcmdzKSB7DQogICAgICAgICAgICAvLyAgICAgLy9hcmdzLnByZXZlbnREZWZhdWx0KCk7DQogICAgICAgICAgICAvLyAgICAgaWYgKGFyZ3MuY3VycmVudFRhcmdldCA9PT0gb3ZlcmxheUNsaWNrU291cmNlKSB7DQogICAgICAgICAgICAvLyAgICAgICAgIG92ZXJsYXlDbGlja1NvdXJjZSA9IG51bGw7DQogICAgICAgICAgICAvLyAgICAgfQ0KICAgICAgICAgICAgLy8gfSk7DQoNCiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoImluaXRpYWxpemVkIik7DQogICAgICAgIH0pOw0KDQoNCiAgICB9Ow0KDQogICAgcmV0dXJuIGFwaTsNCg0KfShqUXVlcnkpOw0KDQpYQS5yZWdpc3Rlcigib3ZlcmxheSIsIFhBLmNvbXBvbmVudC5vdmVybGF5KTs=
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 11483
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20160811T135343Z
