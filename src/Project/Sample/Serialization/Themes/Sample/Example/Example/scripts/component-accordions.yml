---
ID: "06509ebe-67e4-4587-8565-0611f3b5c6b9"
Parent: "c5a1d44e-ed67-425b-9024-241961d0ca59"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Themes/Sample/Example/Example/scripts/component-accordions"
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/26E8063CCA2F4A50973BDD32FFE748F0.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "7b020aed-2256-4ab6-821a-5436b7f4216c"
  Value: LyogZ2xvYmFsIF86dHJ1ZSAqLw0KWEEuY29tcG9uZW50LmFjY29yZGlvbnMgPSAoZnVuY3Rpb24oJCkgew0KICAgIHZhciBwdWIgPSB7fTsNCg0KICAgIGZ1bmN0aW9uIHBhZ2VFZGl0b3IoKSB7DQogICAgICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ29uLXBhZ2UtZWRpdG9yJykpIHsNCiAgICAgICAgICAgIFNpdGVjb3JlLlBhZ2VNb2Rlcy5DaHJvbWVNYW5hZ2VyLnJlc2V0Q2hyb21lcygpOyAvL3BhZ2UgZWRpdG9yIGxpbmVzIGZpeA0KICAgICAgICB9DQogICAgfQ0KDQogICAgdmFyIHRvb2dsZUV2ZW50cyA9IHsNCiAgICAgICAgZm9jdXM6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygic2hvdyIpOw0KICAgICAgICB9LA0KICAgICAgICBibHVyOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoInNob3ciKTsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICBmdW5jdGlvbiBoZWFkZXJCYWNrZ3JvdW5kKGhlYWRlcikgew0KICAgICAgICB2YXIgYmFja2dyb3VuZEljb24gPSAkKGhlYWRlciksDQogICAgICAgICAgICBiYWNrZ3JvdW5kID0gJChoZWFkZXIpLmZpbmQoJ2ltZycpLA0KICAgICAgICAgICAgYmFja2dyb3VuZFNyYyA9IGJhY2tncm91bmQuYXR0cignc3JjJyk7DQoNCiAgICAgICAgaWYgKGJhY2tncm91bmRTcmMpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmRJY29uLnBhcmVudHMoJy5hY2NvcmRpb24nKS5hZGRDbGFzcygnYWNjb3JkaW9uLWltYWdlJyk7DQoNCiAgICAgICAgICAgIGJhY2tncm91bmRJY29uLmNzcyh7DQogICAgICAgICAgICAgICAgJ2JhY2tncm91bmQnOiAndXJsKCcgKyBiYWNrZ3JvdW5kU3JjICsgJyknLA0KICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXJlcGVhdCc6ICduby1yZXBlYXQnLA0KICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXNpemUnOiAnY292ZXInLA0KICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXBvc2l0aW9uJzogJzUwJSAxMDAlJw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGJhY2tncm91bmQuaGlkZSgpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY2FsY1NsaWRlU2l6ZShhY2MpIHsNCiAgICAgICAgdmFyIGFjY29yZGlvbldpZHRoID0gJChhY2MpLndpZHRoKCksDQogICAgICAgICAgICBhY2NvcmRpb25JdGVtcyA9ICQoYWNjKS5maW5kKCcuaXRlbScpLA0KICAgICAgICAgICAgbWF4SGVpZ2h0ID0gMDsNCg0KICAgICAgICBfLmVhY2goYWNjb3JkaW9uSXRlbXMsIGZ1bmN0aW9uKGl0ZW0pIHsNCiAgICAgICAgICAgIHZhciBpdGVtQ29udGVudCA9ICQoaXRlbSkuZmluZCgnLnRvZ2dsZS1jb250ZW50JyksDQogICAgICAgICAgICAgICAgaXRlbUhlYWRlciA9ICQoaXRlbSkuZmluZCgnLnRvZ2dsZS1oZWFkZXInKSwNCiAgICAgICAgICAgICAgICBzbGlkZVdpZHRoID0gYWNjb3JkaW9uV2lkdGggLSAoYWNjb3JkaW9uSXRlbXMubGVuZ3RoICogaXRlbUhlYWRlci5vdXRlcldpZHRoKCkpOw0KDQogICAgICAgICAgICBpZiAoJChpdGVtKS5oYXNDbGFzcygnYWN0aXZlJykpIHsNCiAgICAgICAgICAgICAgICAkKGl0ZW0pLmNzcyh7DQogICAgICAgICAgICAgICAgICAgICd3aWR0aCc6IHNsaWRlV2lkdGgNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy93aWR0aA0KICAgICAgICAgICAgaXRlbUNvbnRlbnQuY3NzKHsNCiAgICAgICAgICAgICAgICAnd2lkdGgnOiAoJChhY2MpLmhhc0NsYXNzKCdhY2NvcmRpb24taW1hZ2UnKSkgPyBzbGlkZVdpZHRoICsgaXRlbUhlYWRlci5vdXRlcldpZHRoKCkgOiBzbGlkZVdpZHRoIC0gaXRlbUhlYWRlci5vdXRlcldpZHRoKCkgLSBwYXJzZUludChpdGVtSGVhZGVyLmNzcygncGFkZGluZycpKQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vaGVpZ2h0DQogICAgICAgICAgICBpZiAoJChpdGVtKS5maW5kKCcudG9nZ2xlLWNvbnRlbnQnKS5oZWlnaHQoKSA+IG1heEhlaWdodCkgew0KICAgICAgICAgICAgICAgIG1heEhlaWdodCA9ICQoaXRlbSkuZmluZCgnLnRvZ2dsZS1jb250ZW50JykuaGVpZ2h0KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFuaW1hdGVIb3Jpem9udGFsKHByb3BlcnRpZXMpIHsNCiAgICAgICAgdmFyIGFjY29yZGlvbiA9ICQodGhpcykucGFyZW50cygnLmFjY29yZGlvbicpLA0KICAgICAgICAgICAgcGFuZWwgPSAkKHRoaXMpLmNsb3Nlc3QoJy5pdGVtJyksDQogICAgICAgICAgICBoZWFkZXIgPSBwYW5lbC5maW5kKCcudG9nZ2xlLWhlYWRlcicpLA0KICAgICAgICAgICAgY29udGVudCA9IHBhbmVsLmZpbmQoJy50b2dnbGUtY29udGVudCcpLA0KICAgICAgICAgICAgaXRlbXMgPSBhY2NvcmRpb24uZmluZCgnLml0ZW0nKSwNCiAgICAgICAgICAgIHNpYmxpbmdzID0gcGFuZWwuc2libGluZ3MoKSwNCiAgICAgICAgICAgIHNpYmxpbmdzQ29udGVudCA9IHNpYmxpbmdzLmZpbmQoJy50b2dnbGUtY29udGVudCcpOw0KDQogICAgICAgIHNpYmxpbmdzLnN0b3AodHJ1ZSkuYW5pbWF0ZSh7DQogICAgICAgICAgICAid2lkdGgiOiAwDQogICAgICAgIH0sIHByb3BlcnRpZXMuc3BlZWQsIHByb3BlcnRpZXMuZWFzaW5nLCBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHNpYmxpbmdzQ29udGVudC5jc3Moew0KICAgICAgICAgICAgICAgICJkaXNwbGF5IjogIm5vbmUiDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgaWYgKHBhbmVsLmhhc0NsYXNzKCdhY3RpdmUnKSkgew0KDQogICAgICAgICAgICB2YXIgc2xpZGVXaWR0aCA9IGFjY29yZGlvbi5oYXNDbGFzcygnYWNjb3JkaW9uLWltYWdlJykgPyBjb250ZW50Lm91dGVyV2lkdGgoKSA6IChhY2NvcmRpb24ub3V0ZXJXaWR0aCgpIC0gKChpdGVtcy5sZW5ndGggLSAxKSAqIHBhbmVsLm91dGVyV2lkdGgoKSArIDIpKSwNCiAgICAgICAgICAgICAgICBjb250ZW50V2lkdGggPSBhY2NvcmRpb24uaGFzQ2xhc3MoJ2FjY29yZGlvbi1pbWFnZScpID8gc2xpZGVXaWR0aCA6IHNsaWRlV2lkdGggLSBoZWFkZXIub3V0ZXJXaWR0aCgpOw0KDQogICAgICAgICAgICBwYW5lbC5zdG9wKHRydWUpLmFuaW1hdGUoew0KICAgICAgICAgICAgICAgICJ3aWR0aCI6IHNsaWRlV2lkdGgNCiAgICAgICAgICAgIH0sIHByb3BlcnRpZXMuc3BlZWQsIHByb3BlcnRpZXMuZWFzaW5nLCBmdW5jdGlvbigpIHsNCg0KICAgICAgICAgICAgfSk7DQoNCg0KICAgICAgICAgICAgY29udGVudC5jc3Moew0KICAgICAgICAgICAgICAgICJ3aWR0aCI6IGNvbnRlbnRXaWR0aCwNCiAgICAgICAgICAgICAgICAiZGlzcGxheSI6ICJibG9jayINCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICAgIHBhbmVsLnN0b3AodHJ1ZSkuYW5pbWF0ZSh7DQogICAgICAgICAgICAgICAgIndpZHRoIjogMA0KICAgICAgICAgICAgfSwgcHJvcGVydGllcy5zcGVlZCwgcHJvcGVydGllcy5lYXNpbmcsIGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIGNvbnRlbnQuY3NzKHsNCiAgICAgICAgICAgICAgICAgICAgImRpc3BsYXkiOiAibm9uZSINCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWNjb3JkaW9uKGFjYywgcHJvcGVydGllcykgew0KICAgICAgICB2YXIgZXYgPSAnY2xpY2snLA0KICAgICAgICAgICAgJGJvZHkgPSAkKCdib2R5JyksDQogICAgICAgICAgICB0b2dnbGVIZWFkZXIgPSBhY2MuZmluZCgnLnRvZ2dsZS1oZWFkZXInKTsNCg0KICAgICAgICBpZiAocHJvcGVydGllcy5leHBhbmRPbkhvdmVyKSB7DQogICAgICAgICAgICBpZiAoISRib2R5Lmhhc0NsYXNzKCdvbi1wYWdlLWVkaXRvcicpKSB7DQogICAgICAgICAgICAgICAgZXYgPSAnbW91c2VlbnRlcic7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGV2ID0gJ2NsaWNrJzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9DQoNCiAgICAgICAgdG9nZ2xlSGVhZGVyLm9uKCJtb3VzZW92ZXIiLCB0b29nbGVFdmVudHMuZm9jdXMpOw0KICAgICAgICB0b2dnbGVIZWFkZXIub24oIm1vdXNlbGVhdmUiLCB0b29nbGVFdmVudHMuYmx1cik7DQogICAgICAgIHRvZ2dsZUhlYWRlci5vbigiZm9jdXMiLCB0b29nbGVFdmVudHMuZm9jdXMpOw0KICAgICAgICB0b2dnbGVIZWFkZXIub24oImJsdXIiLCB0b29nbGVFdmVudHMuYmx1cik7DQogICAgICAgIHRvZ2dsZUhlYWRlci5vbigia2V5dXAiLCBmdW5jdGlvbihlKSB7DQogICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7DQogICAgICAgICAgICAgICAgJCh0aGlzKS5jbGljaygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCg0KDQogICAgICAgIGlmIChhY2MuaGFzQ2xhc3MoJ2FjY29yZGlvbi1ob3Jpem9udGFsJykpIHsNCiAgICAgICAgICAgIC8vY2FsYyBzbGlkZSB3aWR0aA0KICAgICAgICAgICAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgY2FsY1NsaWRlU2l6ZShhY2MpOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIF8uZWFjaCh0b2dnbGVIZWFkZXIsIGZ1bmN0aW9uKGhlYWRlcikgew0KICAgICAgICAgICAgICAgIGhlYWRlckJhY2tncm91bmQoaGVhZGVyKTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgIH0NCg0KDQogICAgICAgIHRvZ2dsZUhlYWRlci5vbihldiwgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB2YXIgYWNjb3JkaW9uID0gJCh0aGlzKS5wYXJlbnRzKCcuYWNjb3JkaW9uJyksDQogICAgICAgICAgICAgICAgcGFuZWwgPSAkKHRoaXMpLmNsb3Nlc3QoJy5pdGVtJyksDQogICAgICAgICAgICAgICAgJGJvZHkgPSAkKCdib2R5JyksDQogICAgICAgICAgICAgICAgY29udGVudCA9IHBhbmVsLmZpbmQoJy50b2dnbGUtY29udGVudCcpLA0KICAgICAgICAgICAgICAgIHNpYmxpbmdzID0gcGFuZWwuc2libGluZ3MoKSwNCiAgICAgICAgICAgICAgICBzaWJsaW5nc0NvbnRlbnQgPSBzaWJsaW5ncy5maW5kKCcudG9nZ2xlLWNvbnRlbnQnKSwNCiAgICAgICAgICAgICAgICB0aW1lb3V0SWQ7DQoNCiAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIHBhZ2VFZGl0b3IoKTsNCiAgICAgICAgICAgIH07DQoNCiAgICAgICAgICAgIGlmICghcHJvcGVydGllcy5leHBhbmRPbkhvdmVyKSB7DQogICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuY2FuT3Blbk11bHRpcGxlKSB7DQogICAgICAgICAgICAgICAgICAgIHBhbmVsLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTsNCiAgICAgICAgICAgICAgICAgICAgY29udGVudC5zdG9wKCkuc2xpZGVUb2dnbGUoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBwcm9wZXJ0aWVzLnNwZWVkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogcHJvcGVydGllcy5lYXNpbmcNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuY2FuVG9nZ2xlKSB7DQoNCg0KICAgICAgICAgICAgICAgICAgICAgICAgc2libGluZ3MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBwYW5lbC50b2dnbGVDbGFzcygnYWN0aXZlJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY2NvcmRpb24uaGFzQ2xhc3MoImFjY29yZGlvbi1ob3Jpem9udGFsIikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FuaW1hdGlvbiBmb3IgaG9yaXpvbnRhbCBhY2NvcmRpb24NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRlSG9yaXpvbnRhbC5jYWxsKHRoaXMsIHByb3BlcnRpZXMpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpYmxpbmdzQ29udGVudC5zdG9wKCkuc2xpZGVVcCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogcHJvcGVydGllcy5zcGVlZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogcHJvcGVydGllcy5lYXNpbmcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2spOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5zdG9wKCkuc2xpZGVUb2dnbGUoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHByb3BlcnRpZXMuc3BlZWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IHByb3BlcnRpZXMuZWFzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBzaWJsaW5ncy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBzaWJsaW5nc0NvbnRlbnQuc2xpZGVVcCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBwcm9wZXJ0aWVzLnNwZWVkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IHByb3BlcnRpZXMuZWFzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhbmVsLmFkZENsYXNzKCdhY3RpdmUnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuc2xpZGVEb3duKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHByb3BlcnRpZXMuc3BlZWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogcHJvcGVydGllcy5lYXNpbmcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5jYW5Ub2dnbGUpIHsNCiAgICAgICAgICAgICAgICAgICAgcGFuZWwudW5iaW5kKCdtb3VzZWxlYXZlJyk7DQoNCiAgICAgICAgICAgICAgICAgICAgaWYgKCEkYm9keS5oYXNDbGFzcygnb24tcGFnZS1lZGl0b3InKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWwub24oJ21vdXNlbGVhdmUnLCBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYW5lbC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY2NvcmRpb24uaGFzQ2xhc3MoImFjY29yZGlvbi1ob3Jpem9udGFsIikpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYW5pbWF0aW9uIGZvciBob3Jpem9udGFsIGFjY29yZGlvbg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZUhvcml6b250YWwuY2FsbCh0aGlzLCBwcm9wZXJ0aWVzKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5zdG9wKCkuc2xpZGVVcCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBwcm9wZXJ0aWVzLnNwZWVkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IHByb3BlcnRpZXMuZWFzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgJGJvZHkub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjb3JkaW9uLmhhc0NsYXNzKCJhY2NvcmRpb24taG9yaXpvbnRhbCIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FuaW1hdGlvbiBmb3IgaG9yaXpvbnRhbCBhY2NvcmRpb24NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGVIb3Jpem9udGFsLmNhbGwodGhpcywgcHJvcGVydGllcyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuc3RvcCgpLnNsaWRlVXAoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogcHJvcGVydGllcy5zcGVlZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBwcm9wZXJ0aWVzLmVhc2luZw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2spOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApOw0KDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQoNCg0KICAgICAgICAgICAgICAgICAgICBjb250ZW50LnVuYmluZCgnbW91c2VlbnRlcicpOw0KICAgICAgICAgICAgICAgICAgICBjb250ZW50Lm9uKCdtb3VzZWVudGVyJywgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGlmIChhY2NvcmRpb24uaGFzQ2xhc3MoImFjY29yZGlvbi1ob3Jpem9udGFsIikpIHsNCiAgICAgICAgICAgICAgICAgICAgc2libGluZ3MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KDQogICAgICAgICAgICAgICAgICAgIHBhbmVsLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTsNCiAgICAgICAgICAgICAgICAgICAgLy9hbmltYXRpb24gZm9yIGhvcml6b250YWwgYWNjb3JkaW9uDQogICAgICAgICAgICAgICAgICAgIGFuaW1hdGVIb3Jpem9udGFsLmNhbGwodGhpcywgcHJvcGVydGllcyk7DQoNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBzaWJsaW5ncy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgIHNpYmxpbmdzQ29udGVudC5zdG9wKCkuc2xpZGVVcCh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHByb3BlcnRpZXMuc3BlZWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBwcm9wZXJ0aWVzLmVhc2luZw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKTsNCg0KICAgICAgICAgICAgICAgICAgICBwYW5lbC5hZGRDbGFzcygnYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuc2xpZGVEb3duKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogcHJvcGVydGllcy5zcGVlZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IHByb3BlcnRpZXMuZWFzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2spOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZGlzYWJsZUVtcHR5QWNjb3JkaW9ucygkYWNjb3JkaW9uKSB7DQogICAgICAgIHZhciBlbXB0eVBsYWNlaG9sZGVycyA9ICRhY2NvcmRpb24uZmluZCgiLml0ZW0gLnNjRW1wdHlQbGFjZWhvbGRlciIpLA0KICAgICAgICAgICAgaSwgbGVuZ3RoLA0KICAgICAgICAgICAgcGxhY2Vob2xkZXJDb2RlVGFnLA0KICAgICAgICAgICAgcGFyZW50LA0KICAgICAgICAgICAgJHBsYWNlaG9sZGVyLA0KICAgICAgICAgICAgcGxhY2Vob2xkZXJJZCwNCiAgICAgICAgICAgIHBsYWNlaG9sZGVyS2V5LA0KICAgICAgICAgICAgZWRpdEZyYW1lLA0KICAgICAgICAgICAgY2hyb21lS2V5LA0KICAgICAgICAgICAgaDsNCg0KICAgICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBlbXB0eVBsYWNlaG9sZGVycy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgJHBsYWNlaG9sZGVyID0gJChlbXB0eVBsYWNlaG9sZGVyc1tpXSk7DQogICAgICAgICAgICBwbGFjZWhvbGRlcklkID0gJHBsYWNlaG9sZGVyLmF0dHIoInNjLXBsYWNlaG9sZGVyLWlkIik7DQoNCiAgICAgICAgICAgIC8vZGlzYWJsZSBlZGl0IGZyYW1lcw0KICAgICAgICAgICAgcGxhY2Vob2xkZXJDb2RlVGFnID0gJHBsYWNlaG9sZGVyLnNpYmxpbmdzKCJjb2RlW2Nocm9tZXR5cGU9J3BsYWNlaG9sZGVyJ11baWQ9JyIgKyBwbGFjZWhvbGRlcklkICsgIiddIik7DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyS2V5ID0gcGxhY2Vob2xkZXJDb2RlVGFnLmF0dHIoImtleSIpOw0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YocGxhY2Vob2xkZXJLZXkpID09PSAic3RyaW5nIikgew0KICAgICAgICAgICAgICAgICAgICBlZGl0RnJhbWUgPSBTaXRlY29yZS5QYWdlTW9kZXMuQ2hyb21lTWFuYWdlci5jaHJvbWVzKCkuZmlsdGVyKGZ1bmN0aW9uKGNocm9tZSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY2hyb21lS2V5ID0gY2hyb21lLm9wZW5pbmdNYXJrZXIoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2hyb21lS2V5KSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAgICAgICAgICAgICBjaHJvbWVLZXkgPSBjaHJvbWVLZXkuYXR0cigia2V5Iik7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mKGNocm9tZUtleSkgIT09ICJ1bmRlZmluZWQiICYmIGNocm9tZUtleS5pbmRleE9mKHBsYWNlaG9sZGVyS2V5KSA9PT0gMDsNCiAgICAgICAgICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgICAgICAgICAgZWRpdEZyYW1lWzBdLnR5cGUuY2hyb21lLmRhdGEuY3VzdG9tLmVkaXRhYmxlID0gImZhbHNlIjsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICB0aHJvdyA2NjY7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyAvL2ZhbGxiYWNrIC0gZGVsZXRlIGNvZGUgdGFncyB0byBwcmV2ZW50IGluc2VydGluZyBpbnRvIHBsYWNlaG9sZGVycw0KICAgICAgICAgICAgICAgICRwbGFjZWhvbGRlci5zaWJsaW5ncygiY29kZVtjaHJvbWV0eXBlPSdwbGFjZWhvbGRlciddIikucmVtb3ZlKCk7DQogICAgICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgbm8tYWxlcnQsIG5vLWNvbnNvbGUgKi8NCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiQ291bGQgbm90IGRpc2FibGUgZWRpdGluZyBmb3IgcGxhY2Vob2xkZXIiLCBlKTsNCiAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWFsZXJ0LCBuby1jb25zb2xlICovDQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIC8vYWRqdXN0IGhlaWdodCwgYW5kIHJlbW92ZSBwbGFjZWhvbGRlciAiZGFzaGVkIiBiYWNrZ3JvdW5kDQogICAgICAgICAgICBwYXJlbnQgPSAkcGxhY2Vob2xkZXIucGFyZW50cygiLnRvZ2dsZS1oZWFkZXIiKTsNCiAgICAgICAgICAgIGlmIChwYXJlbnQubGVuZ3RoICE9PSAwKSB7DQogICAgICAgICAgICAgICAgaCA9IHBhcnNlSW50KHBhcmVudC5jc3MoImZvbnQtc2l6ZSIpKSAqIDIgfHwgKCRwbGFjZWhvbGRlci5oZWlnaHQoKSAvIDMpOw0KICAgICAgICAgICAgICAgICRwbGFjZWhvbGRlci5hcHBlbmQoJCgiPHA+W05vIGNvbXBvbmVudHMgaW4gaGVhZGVyXTwvcD4iKSk7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGggPSAkcGxhY2Vob2xkZXIuaGVpZ2h0KCk7DQogICAgICAgICAgICAgICAgJHBsYWNlaG9sZGVyLmFwcGVuZCgkKCI8cD5bTm8gY29tcG9uZW50cyBpbiBzZWN0aW9uXTwvcD4iKSk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBoICs9ICJweCI7DQogICAgICAgICAgICAkcGxhY2Vob2xkZXIucmVtb3ZlQ2xhc3MoInNjRW1wdHlQbGFjZWhvbGRlciIpOw0KICAgICAgICAgICAgJHBsYWNlaG9sZGVyLmNzcygiaGVpZ2h0IiwgaCk7DQogICAgICAgIH0NCg0KICAgIH0NCg0KICAgIHB1Yi5pbml0ID0gZnVuY3Rpb24oKSB7DQogICAgICAgIHZhciBhY2NvcmRpb25zID0gJCgnLmFjY29yZGlvbjpub3QoLmluaXRpYWxpemVkKScpOw0KDQogICAgICAgIGFjY29yZGlvbnMuZWFjaChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHZhciBwcm9wZXJ0aWVzID0gJCh0aGlzKS5kYXRhKCdwcm9wZXJ0aWVzJyksDQogICAgICAgICAgICAgICAgYWNjID0gJCh0aGlzKTsNCg0KICAgICAgICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ3RvZ2dsZScpKSB7DQogICAgICAgICAgICAgICAgJC5leHRlbmQocHJvcGVydGllcywgew0KICAgICAgICAgICAgICAgICAgICAnY2FuVG9nZ2xlJzogdHJ1ZSwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgYWNjLmZpbmQoJy50b2dnbGUtY29udGVudCcpLmhpZGUoKTsNCiAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLmV4cGFuZGVkQnlEZWZhdWx0KSB7DQogICAgICAgICAgICAgICAgYWNjLmZpbmQoJ2xpOmZpcnN0LWNoaWxkJykuYWRkQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgICAgIGFjYy5maW5kKCdsaTpmaXJzdC1jaGlsZCcpLmZpbmQoJy50b2dnbGUtY29udGVudCcpLnNob3coKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgYWNjb3JkaW9uKGFjYywgcHJvcGVydGllcyk7DQogICAgICAgICAgICBkaXNhYmxlRW1wdHlBY2NvcmRpb25zKGFjYyk7DQogICAgICAgICAgICBhY2MuYWRkQ2xhc3MoJ2luaXRpYWxpemVkJyk7DQogICAgICAgIH0pOw0KICAgIH07DQoNCiAgICByZXR1cm4gcHViOw0KDQp9KGpRdWVyeSkpOw0KDQpYQS5yZWdpc3RlcignYWNjb3JkaW9ucycsIFhBLmNvbXBvbmVudC5hY2NvcmRpb25zKTs=
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 13784
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20160811T135342Z
